Vagrant.configure("2") do |config|
  config.vm.box = "centos/7"
   # Hostname
   config.vm.hostname = "multidisk"
   config.vm.usable_port_range= 2800..2900
   config.vm.box_check_update = false
 
   # Create a private network, which allows host-only access to the machine
   # using a specific IP.
   config.vm.network "private_network", ip: "172.16.0.201"
   config.vm.network "private_network", ip: "172.10.0.201"
 
   # Provider-specific configuration so you can fine-tune various
   # backing providers for Vagrant. These expose provider-specific options.
   config.vm.provider "virtualbox" do |v|
    
    # Need to enable more than one CPU and things like SATA controllers
    v.customize ["modifyvm", :id, "--ioapic", "on" ]

    # Customize the amount of memory and CPU oin the VM:
    v.customize ["modifyvm", :id, "--memory", "512" ]
    v.customize ["modifyvm", :id, "--cpus", "1" ]

    # Make sure things are stripped down
    v.customize ["modifyvm", :id, "--audio", "none" ]
    v.customize ["modifyvm", :id, "--usb", "off" ]

    # Add a SATA controller with n numbder of ports
    v.customize ['storagectl', :id, '--name',  'SATA Controller', '--add', 'sata',  '--controller', 'IntelAhci', '--portcount', 4]
    
    unless File.exist?("osd-disk01.vdi")
      v.customize ['createhd', '--filename', "osd-disk01.vdi", '--size', 1024]
    end  # End check disk

    v.customize ['storageattach', :id, '--storagectl', 'SATA Controller', '--port', 1, '--device', 0, '--type', 'hdd', '--medium', "./osd-disk01.vdi"]

  
  
  end # End Provider
end
